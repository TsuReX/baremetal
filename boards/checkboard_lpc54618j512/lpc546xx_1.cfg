adapter_khz 500
source [find target/swj-dp.tcl]
source [find mem_helper.tcl]

set _CHIPNAME lpc546xx
set _TAPID 0x10caa02b
set _WORKAREASIZE $WORKAREASIZE

#swj_newdap $_CHIPNAME cpu -irlen 5 ;#-expected-id $_TAPID
jtag newtap $_CHIPNAME cpu -irlen 5 ;#-expected-id $_TAPID

target create $_CHIPNAME.cpu cortex_m -chain-position $_CHIPNAME.cpu

$_CHIPNAME.cpu configure -work-area-phys 0x20000000 \
							-work-area-size $_WORKAREASIZE -work-area-backup 0

if { ![using_hla] } {
	cortex_m reset_config vectreset
}

scan_chain

targets